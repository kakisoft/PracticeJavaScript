<!DOCTYPE html>
<html lang="jp">
<head>
    <meta charset="utf-8">
    <title>jQuery misc01</title>
</head>
<body>
    <button type="button" id="id_my_button_01" name="name_my_button_01">チェックボックス・ラジオボタンの値を取得</button>
    <button type="button" id="id_my_button_02" name="name_my_button_02">チェックボックス・ラジオボタンの値を変更</button>
    <br><br>
    <button type="button" id="id_my_button_03" name="name_my_button_03">コンボボックスの値を取得</button>
    <button type="button" id="id_my_button_04" name="name_my_button_04">コンボボックスの値を変更</button>
    <br><br>
    <button type="button" id="id_my_button_05" name="name_my_button_05">id から class を取得</button>
    <br><br>

    <div>
        <input type="checkbox" name="name_my_checkbox01" id="id_my_checkbox01" value="1">チェックボックス
        <input type="text" name="name_my_textbox01" id="id_my_textbox01" value="text">
        <span id="my-span01">---no---</span>
    </div>

    <div>
        <input type="checkbox" name="name-my-checkbox02" id="is_edit_password" value="1">パスワードを変更する
        <input type="password" name="name-my-password01" id="password" value="password">
    </div>

    <div>
        <ul>
            <li>
                <label><input type="radio" value="1" name="admin" id="admin_1" checked><span>管理者</span></label>
            </li>
            <li>
                <label><input type="radio" value="0" name="admin" id="admin_0" ><span>一般ユーザー</span></label>
            </li>
            <li>
                <label><input type="radio" value="" name="admin" id="admin" ><span>指定なし</span></label>
            </li>
        </ul>


        <label><input type="radio" id="rd0" name="radio_test" value="０番" />ラジオテスト0</label>
        <label><input type="radio" id="rd1" name="radio_test" value="１番" />ラジオテスト1</label>
        <label><input type="radio" id="rd2" name="radio_test" value="２番" checked/>ラジオテスト2</label>
    </div>

    <div>
        <select name="name_blood_type" id="id_blood_type">
            <option value="A"  id="blood_type_A" >A型</option>
            <option value="B"  id="blood_type_B" >B型</option>
            <option value="O"  id="blood_type_O" >O型</option>
            <option value="AB" id="blood_type_AB">AB型</option>
        </select>
    </div>

    <div>
        <div class="success" id="chk_result_status_01">【id:chk_result_status_01】</div>
        <div class="error"   id="chk_result_status_02">【id:chk_result_status_02】</div>
    </div>

    <!-- ============================================ -->
    <hr>
    <h1>
        B101  ボタンの値（Value）を取得
    </h1>
    <!-- ============================================ -->
    <div>
        <button id="get_button_param_01" value="a"  name="my_buttons[]">ボタンの値を取得１</button>
        <button id="get_button_param_02" value="bb" name="my_buttons[]">ボタンの値を取得２</button>
    </div>
    <br>

    <!-- ============================================ -->
    <hr>
    <h1>
        B102  ボタンの値（Value）をJsonで取得
    </h1>
    <!-- ============================================ -->
    <div>
        <button id="get_button_param_from_json_01" value='{"result":2, "count":42}'>ボタンの値をJOSN形式で取得１</button>
        <!-- ↓こっちだとエラー（ value を "" で囲む ） -->
        <button id="get_button_param_from_json_02" value="{'result':3, 'count':42}" >ボタンの値をJOSN形式で取得２</button>
    </div>

    <!-- ============================================ -->
    <hr>
    <h1>
        C101  ajax 汎用スタイル
    </h1>
    <!-- ============================================ -->
    <div>
        <button id="ajax_general_style_01">ajax 汎用スタイル１</button>
        <!-- ↓こっちだとエラー（ value を "" で囲む ） -->
        <button id="ajax_general_style_02">ajax 汎用スタイル２</button>
    </div>


    <!-- ============================================ -->
    <hr>
    <h1>
        D101  フォーカスアウト時にチェック
    </h1>
    <!-- ============================================ -->
    <div>
        <textarea name="remarks_01" class="check6" style="border:2px black dotted; margin: 0; padding: 0; width: 20%; height:4.5em;">remarks_01</textarea>
        <textarea name="remarks_02" class="check6" style="border:2px black dotted; margin: 0; padding: 0; width: 20%; height:4.5em;">remarks_02</textarea>
        <textarea name="remarks_03" class="check6" style="border:2px black dotted; margin: 0; padding: 0; width: 20%; height:4.5em;">remarks_03</textarea>
    </div>


    <!-- ============================================ -->
    <hr>
    <h1>
        D102  特定条件の時のみ、ボタンを表示
    </h1>
    <!-- ============================================ -->
    <div>
        <span class="d102-001">
            <label><input type="radio" name="report_type" value="1" checked="checked">タイプ１</label>
            <label><input type="radio" name="report_type" value="2" >タイプ２</label>
        </span>
        <span>
            <input
                type="button"
                id="d102_button_1"
                class="visible_control_for_print_button"
                value="何かのボタン１"
                />
            &nbsp;
            <input
                type="button"
                id="d102_button_group_2_1"
                class="visible_control_for_print_button"
                value="何かのボタン２－１"
                />
            <input
                type="button"
                id="d102_button_group_2_2"
                class="visible_control_for_print_button"
                value="何かのボタン２－２"
                />
            &nbsp;
        </span>
    </div>



    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script><!-- こっちでもOK -->
<!--     <script src="http://code.jquery.com/jquery-3.2.1.min.js"></script> -->
    <!-- スクリプトはjQueryを読み込んだ後に記述する -->
    <!-- <script src="assets/practice_jquery.js"></script>     -->
    <script>

$(window).on('load', function(){
    // initialFunction01();
    // initialFunction03();
});

initialFunction01();
initialFunction03();

function initialFunction01(){
    console.log("init01");
}

$(function initialFunction02() {
    console.log("init02");
});

function initialFunction03(){
    var a1 = $("#id_my_textbox01").val();
    console.log(a1);
}


//================================================
//   name をキーにチェックボックスの状態を取得
//================================================
$(function() {
    $('input[name="name_my_checkbox01"]').change(function() {
        var prop = $('input[name="name_my_checkbox01"]').prop('checked');

        if (prop) {
            $('#my-span01').text('ON');
        } else {
            $('#my-span01').text('OFF');
        }
    });
});

//================================================
//     id をキーにチェックボックスの状態を取得
//================================================
$('#id_my_checkbox01').change(function() {
    var prop = $('#id_my_checkbox01').prop('checked');

    if (prop) {
        $("#id_my_textbox01").prop("disabled", true);
    } else {
        $("#id_my_textbox01").prop("disabled", false);
    }
});

//================================================
//  チェックボックスの値の変更を検知してごにょごにょ
//================================================
changePasswordInputStatus();
$('#is_edit_password').change(function() {
    changePasswordInputStatus();
});
function changePasswordInputStatus(){
    var isEditPassword = $('#is_edit_password').prop('checked');

    if (isEditPassword) {
        $("#password").prop("disabled", false);
        $("#password").val("");
    } else {
        $("#password").prop("disabled", true);
    }
}

//================================================
//           チェックボックスの値を取得
//================================================
$('#id_my_button_01').on('click', function() {
    var checkbox01 = $('input[name="name_my_checkbox01"]').prop('checked');
    console.log("------------------")
    console.log(checkbox01);
    console.log("------------------")

    // var a1 = $('input[name="admin"]').val();
    // var a1 = $('input[name="admin"]:eq(0)').prop('checked');
    // var a1 = $('input[name="admin"]:checked').val();
    var a1 = $("input[name='admin']:checked").val();

    console.log(a1);



    var radioVal = $("input[name='radio_test']:checked").val();
    // alert(radioVal);
    console.log(radioVal);


    //この方法だと上手く行かぬ・・・。
    var b1 = $("#admin").val();


    //特定の要素のチェックを見るなら、この方法も。
    if($("#admin_1").prop('checked')) {

    }else{

    }

});


//================================================
//     チェックボックス・ラジオボタンの値を変更
//================================================
$('#id_my_button_02').on('click', changeToggleButtonValue);

function changeToggleButtonValue(){
    $('input[name="name_my_checkbox01"]').prop("checked",true);
    // $('#is_edit_password').prop("checked",true);
    $('#is_edit_password').prop("checked",false);


    $('#admin').prop("checked",true);
}


//================================================
//           コンボボックスの値を取得
//================================================
$('#id_my_button_03').on('click', getSelectBoxValue);

function getSelectBoxValue(){
    var selectedParam01 = $('#id_blood_type').val();
    var selectedParam02 = $('[name="name_blood_type"] option:selected').val();
    var selectedParam03 = $("select[name='name_blood_type'] option:selected").val();

    console.log(selectedParam01);
    console.log(selectedParam02);
    console.log(selectedParam03);
}


//================================================
//           コンボボックスの値を変更
//================================================
$('#id_my_button_04').on('click', changeSelectBoxValue);

function changeSelectBoxValue(){
    $('#id_blood_type').val("AB");
}


//================================================
//           ラジオボタン変更イベント
//================================================
$('input[name="radio_test"]').change(function() {
     console.log( $(this).val() );
});


//================================================
//                クラスの着脱 
//================================================
// var div = $("#specify_period").removeClass("inactive");
// var div = $("#specify_period").addClass("inactive");



//================================================
//              
//================================================
// http://js.studio-kingdom.com/jquery/attributes/prop
// <input id="check1" type="checkbox" checked="checked" />

// //jQuery1.6.1以上の場合
// var is_checked   = $('#check1').prop('checked');  //trueが返る
// var attr_checked = $('#check1').attr('checked');  //'checked'が返る



//================================================
//              
//================================================
//jQuery(document).ready(function($) {


//================================================
//            id から class を取得
//================================================
$('#id_my_button_05').on('click', getClassFromId);

function getClassFromId(){
    var a1 = $('#chk_result_status_01').attr('class');  //=> 複数取れる
    var a2 = $('#chk_result_status_01').hasClass("success")
    var a3 = $('#chk_result_status_01').hasClass("error")

    console.table({a1})
    console.table({a2})
    console.table({a3})
}

//========================================================
//      コンボボックス変更イベント（＆コンボボックスの値を取得）
//========================================================
// idで取得
$('#id_blood_type').change(function() {
 
    console.log( $(this).val() );
    // var text = $('option:selected').text(); // これだと、全部とれちゃうよ。
    var text = $('#id_blood_type option:selected').text();
    
    console.log( text );
});

// nameで取得
$('select[name="name_blood_type"]').change(function() {
    console.log("DataGetFrom NAME:" + $(this).val() );
});


//====================================
//   B101  ボタンの値（Value）を取得
//====================================
$('#get_button_param_01').on('click', function (){
    console.log(this)
    console.log(this.value)
});

$('[name="my_buttons[]"]').on('click', function (){
    console.log(this)
    console.log(this.value)
});


//======================================
//   B102  ボタンの値（Value）をJsonで取得
//======================================
$('#get_button_param_from_json_01').on('click', function (){
    obj = JSON.parse( this.value);

    console.log(obj.count);
    console.log(obj.result);
});

//こっちだとエラー。
$('#get_button_param_from_json_02').on('click', function (){
    var myVal = this.value
    // obj = JSON.parse(this.value.json);
    obj = JSON.parse( this.value);

    console.log(obj.count);
    console.log(obj.result);
});

//====================================
//  C101  ajax 汎用スタイル
//====================================
$('#ajax_general_style_01').on('click', function (){
    var value = this.value
    // var target_url = "http://challenge-your-limits.herokuapp.com/call/me";
    var target_url = "https://api.github.com/users/jeresig";

    $.ajax({
            url      : target_url
          , data     : {
                            unique_id : value
                          , param1    : 111
                          , text      : "abcde"
            }
          , type     : "GET"
          , dataType : "json"
        }).done( function( data ) {
            console.log(data)
        }).fail( function( data ) {
            console.log(data)
        }).always(function(){

        });

});




$('#ajax_general_style_02').on('click', function (){
    var value = this.value
    // var target_url = "http://challenge-your-limits.herokuapp.com/call/me";
    var target_url = "https://api.github.com/users/jeresig";

    var GetMyData = function() {

        return $.ajax({

                        url      : target_url
                      , data     : {
                                       news_id   : value
                                     , unique_id : 123
                                     , param1    : 456
                                     , text      : "abcde"
                        }
                    , type     : "GET"
                    , dataType : "json"
                });
    }

    GetMyData().done( function( data ) {

        if(data.length <= 0 ){
            return false;
        }

        // 取得した情報に沿ってごにょごにょ処理
        $.each( data, function() {
//             var myBody = this.body.replace( /(\r\n|\\r|\\n)/g, "<br>" );
            console.log(data);
        } );

        return true;

    }).fail( function( data ) {

    } );

});

//====================================
//  D101  フォーカスアウト時にチェック
//====================================
//// onblurからのalertで再focusしたらバグる問題
// http://doshirouto.wp.xdomain.jp/web/javascript-web/2644
$(function() {
    const REMARK_INPUT_MAX_LENGTH = 10;

    // ロストフォーカス時に入力制限チェック
    $(".check6").blur
    (
        function()
        {
            var value = $(this).val();
            if(value.length > REMARK_INPUT_MAX_LENGTH){
                alert("全角" + REMARK_INPUT_MAX_LENGTH + "文字以内で入力してください。");
                var el_name = $(this).attr("name")
                setTimeout(function(){
                    $('textarea[name="' + el_name + '"]').focus();
                }, 0);
            }
        }
    );

});

    </script>
</body>
</html>



<!--
## 選択されたラジオボタンの値を取得
https://webllica.com/jquery-radio-get-edit/


//================================================
//           ラジオボタンの値を取得
//================================================
$("#get_button").click( function() {
    var radioVal = $("input[name='radio_test']:checked").val();
    alert(radioVal);
});

//================================================
//           ラジオボタンの値を設定
//================================================
// 要素が特定出来ず、value値で判断する場合
$("#get_button").click( function() {
    $("input[name='radio_test']").val(["１番"]);
});
 
// 要素が特定出来て、その要素にチェックを入れる場合
$("#set_button").click( function() {
    $("#rd2").attr("checked", true);
});
 
// チェックを外す場合
$("#set_button").click( function() {
    $("input[name='radio_test']").attr("checked", false);
});

-->

